Скрипт предназначен для организации блокировки от перебора из access.log'ов nginx без изменения самих настроек nginx.  
## Принцип работы:  
	1. Лог парсится по дате и времени и выбираются записи за определённое время в минутах указанное при запуске скрипта.  
	2. Из лога выбираются только ip, сортируются, считаются и самое большое количество запросов с одного IP записывается в файл */etc/ipbans/reqests-count.txt* в формате "<count> <ip>"  
	3. Из этого файла забирается количество и проверяется превышает ли оно порог  
	4. Если превышает и IP не забанен ранее - IP Блокируется через iptables, если нет - проверяется нужно ли разбанить кого-то из ранее заблокированных  
	
##Установка и использование скрипта:  
	1. Склонить репозиторий или просто скопировать скрипт  
		**git clone https://ksenobit16bit@bitbucket.org/ksenobit16bit/ipban.sh.git**  
	2. Создать директорию */etc/ipbans*  
	3. Создать в ней файл */etc/ipbans/ignore_ip.list* и внести в него IP которые никак нельзя банить  
	4. Поправить в переменной **limit** количество запросов ( по умолчанию - 150 )  
	5. Добавить в crontab запись вида */path/to/script <time>*, например */root/scripts/ipban.sh 60*, что значит блокировать IP у которых за 60 минут больше запросов чем установлено в скрипте  
